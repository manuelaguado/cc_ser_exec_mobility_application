var pusher=new Pusher(pusher_key,{cluster:"mt1",encrypted:!0,authEndpoint:"mobile/pusher_auth",auth:{headers:{"X-CSRF-Token":""+csrf_token+""}}});pusher.connection.bind("error",function(a){4004===a.data.code&&console.log(">>> detectado error de limite")});var gpsChannel=pusher.subscribe("gps"+id_operador+""),syncChannel=pusher.subscribe("sync"+id_operador+""),rideChannel=pusher.subscribe("ride"+id_operador+""),bcChannel=pusher.subscribe("broadcast"),realChannel=pusher.subscribe(pusher_presence);
pusher.connection.bind("connected",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-link" style="font-weight: bold; color:#03A388 !important"></span>'});pusher.connection.bind("connecting_in",function(a){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink blink_me" style="font-weight: bold; color:#ffd400 !important">'+a+"</span>"});pusher.connection.bind("unavailable",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink" style="font-weight: bold; color:#ffd400 !important"></span>'});
pusher.connection.bind("initialized",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink blink_me" style="font-weight: bold; color:#FFFFFF !important"></span>'});pusher.connection.bind("connecting",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink blink_me" style="font-weight: bold; color:#FFFFFF !important"></span>'});pusher.connection.bind("disconnected",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink" style="font-weight: bold; color:red !important"></span>'});
pusher.connection.bind("failed",function(){document.getElementById("infolink").innerHTML='<span class="kkicon icon-unlink blink_me" style="font-weight: bold; color:red !important"></span>'});$("body").on("click","#infolink",function(){var a=pusher.connection.state;$("#infostate").html(a)});gpsChannel.bind("evento",function(a){a=JSON.stringify(a.message);gps_ok(a)});syncChannel.bind("evento",function(a){a=JSON.stringify(a.message);sync_ok(a)});
rideChannel.bind("evento",function(a){a=JSON.stringify(a.message);ride_ok(a)});bcChannel.bind("evento",function(a){a=JSON.stringify(a.message);broadcastPlay(a)});